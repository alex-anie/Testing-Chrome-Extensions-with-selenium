/* Copyright 2011 Google Inc. All Rights Reserved. */ (function(){var n=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}},p=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a},aa=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");
},t=aa(this),v=function(a,b){if(b)a:{var c=t;a=a.split(".");for(var d=0;d<a.length-1;d++){var f=a[d];if(!(f in c))break a;c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&p(c,a,{configurable:!0,writable:!0,value:b})}};
v("Symbol",function(a){if(a)return a;var b=function(k,e){this.N=k;p(this,"description",{configurable:!0,writable:!0,value:e})};b.prototype.toString=function(){return this.N};var c="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",d=0,f=function(k){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new b(c+(k||"")+"_"+d++,k)};return f});
v("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=t[b[c]];typeof d==="function"&&typeof d.prototype[a]!="function"&&p(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ba(n(this))}})}return a});
var ba=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a},w=function(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:n(a)};throw Error(String(a)+" is not an iterable or ArrayLike");},ca=function(a){if(!(a instanceof Array)){a=w(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a},y=function(a){return x(a,a)},x=function(a,b){a.raw=b;Object.freeze&&(Object.freeze(a),Object.freeze(b));
return a},z=function(){this.s=!1;this.j=null;this.B=void 0;this.h=1;this.I=this.P=0;this.o=null},A=function(a){if(a.s)throw new TypeError("Generator is already running");a.s=!0};z.prototype.u=function(a){this.B=a};z.prototype.A=function(a){this.o={R:a,U:!0};this.h=this.P||this.I};z.prototype.return=function(a){this.o={return:a};this.h=this.I};var B=function(a,b,c){a.h=c;return{value:b}},C=function(a){this.g=new z;this.X=a};
C.prototype.u=function(a){A(this.g);if(this.g.j)return D(this,this.g.j.next,a,this.g.u);this.g.u(a);return E(this)};var da=function(a,b){A(a.g);var c=a.g.j;if(c)return D(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.g.return);a.g.return(b);return E(a)};C.prototype.A=function(a){A(this.g);if(this.g.j)return D(this,this.g.j["throw"],a,this.g.u);this.g.A(a);return E(this)};
var D=function(a,b,c,d){try{var f=b.call(a.g.j,c);if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");if(!f.done)return a.g.s=!1,f;var k=f.value}catch(e){return a.g.j=null,a.g.A(e),E(a)}a.g.j=null;d.call(a.g,k);return E(a)},E=function(a){for(;a.g.h;)try{var b=a.X(a.g);if(b)return a.g.s=!1,{value:b.value,done:!1}}catch(c){a.g.B=void 0,a.g.A(c)}a.g.s=!1;if(a.g.o){b=a.g.o;a.g.o=null;if(b.U)throw b.R;return{value:b.return,done:!0}}return{value:void 0,done:!0}},ea=function(a){this.next=
function(b){return a.u(b)};this.throw=function(b){return a.A(b)};this.return=function(b){return da(a,b)};this[Symbol.iterator]=function(){return this}},fa=function(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,f){function k(e){e.done?d(e.value):Promise.resolve(e.value).then(b,c).then(k,f)}k(a.next())})},F=function(a){return fa(new ea(new C(a)))},G=function(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};
v("Promise",function(a){function b(){this.i=null}function c(e){return e instanceof f?e:new f(function(g){g(e)})}if(a)return a;b.prototype.G=function(e){if(this.i==null){this.i=[];var g=this;this.H(function(){g.S()})}this.i.push(e)};var d=t.setTimeout;b.prototype.H=function(e){d(e,0)};b.prototype.S=function(){for(;this.i&&this.i.length;){var e=this.i;this.i=[];for(var g=0;g<e.length;++g){var h=e[g];e[g]=null;try{h()}catch(l){this.O(l)}}}this.i=null};b.prototype.O=function(e){this.H(function(){throw e;
})};var f=function(e){this.m=0;this.v=void 0;this.l=[];this.K=!1;var g=this.D();try{e(g.resolve,g.reject)}catch(h){g.reject(h)}};f.prototype.D=function(){function e(l){return function(m){h||(h=!0,l.call(g,m))}}var g=this,h=!1;return{resolve:e(this.Z),reject:e(this.F)}};f.prototype.Z=function(e){if(e===this)this.F(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof f)this.ba(e);else{a:switch(typeof e){case "object":var g=e!=null;break a;case "function":g=!0;break a;default:g=
!1}g?this.Y(e):this.J(e)}};f.prototype.Y=function(e){var g=void 0;try{g=e.then}catch(h){this.F(h);return}typeof g=="function"?this.ea(g,e):this.J(e)};f.prototype.F=function(e){this.M(2,e)};f.prototype.J=function(e){this.M(1,e)};f.prototype.M=function(e,g){if(this.m!=0)throw Error("Cannot settle("+e+", "+g+"): Promise already settled in state"+this.m);this.m=e;this.v=g;this.m===2&&this.aa();this.T()};f.prototype.aa=function(){var e=this;d(function(){if(e.V()){var g=t.console;typeof g!=="undefined"&&
g.error(e.v)}},1)};f.prototype.V=function(){if(this.K)return!1;var e=t.CustomEvent,g=t.Event,h=t.dispatchEvent;if(typeof h==="undefined")return!0;typeof e==="function"?e=new e("unhandledrejection",{cancelable:!0}):typeof g==="function"?e=new g("unhandledrejection",{cancelable:!0}):(e=t.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e));e.promise=this;e.reason=this.v;return h(e)};f.prototype.T=function(){if(this.l!=null){for(var e=0;e<this.l.length;++e)k.G(this.l[e]);
this.l=null}};var k=new b;f.prototype.ba=function(e){var g=this.D();e.C(g.resolve,g.reject)};f.prototype.ea=function(e,g){var h=this.D();try{e.call(g,h.resolve,h.reject)}catch(l){h.reject(l)}};f.prototype.then=function(e,g){function h(q,u){return typeof q=="function"?function(M){try{l(q(M))}catch(N){m(N)}}:u}var l,m,r=new f(function(q,u){l=q;m=u});this.C(h(e,l),h(g,m));return r};f.prototype.catch=function(e){return this.then(void 0,e)};f.prototype.C=function(e,g){function h(){switch(l.m){case 1:e(l.v);
break;case 2:g(l.v);break;default:throw Error("Unexpected state: "+l.m);}}var l=this;this.l==null?k.G(h):this.l.push(h);this.K=!0};f.resolve=c;f.reject=function(e){return new f(function(g,h){h(e)})};f.race=function(e){return new f(function(g,h){for(var l=w(e),m=l.next();!m.done;m=l.next())c(m.value).C(g,h)})};f.all=function(e){var g=w(e),h=g.next();return h.done?c([]):new f(function(l,m){function r(M){return function(N){q[M]=N;u--;u==0&&l(q)}}var q=[],u=0;do q.push(void 0),u++,c(h.value).C(r(q.length-
1),m),h=g.next();while(!h.done)})};return f});v("globalThis",function(a){return a||t});var ha=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,f={next:function(){if(!d&&c<a.length){var k=c++;return{value:b(k,a[k]),done:!1}}d=!0;return{done:!0,value:void 0}}};f[Symbol.iterator]=function(){return f};return f};v("Array.prototype.keys",function(a){return a?a:function(){return ha(this,function(b){return b})}});/*

 Copyright Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
var ia={};function ja(){if(ia!==ia)throw Error("Bad secret");};var ka=y([""]),la=x(["\x00"],["\\0"]),ma=x(["\n"],["\\n"]),na=x(["\x00"],["\\u0000"]),oa=y([""]),pa=x(["\x00"],["\\0"]),qa=x(["\n"],["\\n"]),ra=x(["\x00"],["\\u0000"]);function H(a){return Object.isFrozen(a)&&Object.isFrozen(a.raw)}function I(a){return a.toString().indexOf("`")===-1}var sa=I(function(a){return a(ka)})||I(function(a){return a(la)})||I(function(a){return a(ma)})||I(function(a){return a(na)}),ta=H(oa)&&H(pa)&&H(qa)&&H(ra);var ua=globalThis.trustedTypes,J;function va(){var a=null;if(!ua)return a;try{var b=function(c){return c};a=ua.createPolicy("goog#html",{createHTML:b,createScript:b,createScriptURL:b})}catch(c){throw c;}return a};var K=function(a){ja();this.L=a};K.prototype.toString=function(){return this.L+""};function wa(a){J===void 0&&(J=va());var b=J;return new K(b?b.createScriptURL(a):a)};var L=function(a){ja();this.W=a};L.prototype.toString=function(){return this.W};new L("about:blank");new L("about:invalid#zClosurez");var xa=[],ya=function(a){console.warn("A URL with content '"+a+"' was sanitized away.")};xa.indexOf(ya)===-1&&xa.push(ya);function za(a){var b=G.apply(1,arguments);if(!Array.isArray(a)||!Array.isArray(a.raw)||a.length!==a.raw.length||!sa&&a===a.raw||!(sa&&!ta||H(a))||b.length+1!==a.length)throw new TypeError("\n    ############################## ERROR ##############################\n\n    It looks like you are trying to call a template tag function (fn`...`)\n    using the normal function syntax (fn(...)), which is not supported.\n\n    The functions in the safevalues library are not designed to be called\n    like normal functions, and doing so invalidates the security guarantees\n    that safevalues provides.\n\n    If you are stuck and not sure how to proceed, please reach out to us\n    instead through:\n     - go/ise-hardening-yaqs (preferred) // LINE-INTERNAL\n     - g/ise-hardening // LINE-INTERNAL\n     - https://github.com/google/safevalues/issues\n\n    ############################## ERROR ##############################");
if(b.length===0)return wa(a[0]);var c=a[0].toLowerCase();if(/^data:/.test(c))throw Error("Data URLs cannot have expressions in the template literal input.");if(/^https:\/\//.test(c)||/^\/\//.test(c)){var d=c.indexOf("//")+2;var f=c.indexOf("/",d);if(f<=d)throw Error("Can't interpolate data in a url's origin, Please make sure to fully specify the origin, terminated with '/'.");d=c.substring(d,f);if(!/^[0-9a-z.:-]+$/i.test(d))throw Error("The origin contains unsupported characters.");if(!/^[^:]*(:[0-9]+)?$/i.test(d))throw Error("Invalid port number.");
if(!/(^|\.)[a-z][^.]*$/i.test(d))throw Error("The top-level domain must start with a letter.");d=!0}else d=!1;if(!d)if(/^\//.test(c))if(c==="/"||c.length>1&&c[1]!=="/"&&c[1]!=="\\")d=!0;else throw Error("The path start in the url is invalid.");else d=!1;if(!(d=d||RegExp("^[^:\\s\\\\/]+/").test(c)))if(/^about:blank/.test(c)){if(c!=="about:blank"&&!/^about:blank#/.test(c))throw Error("The about url is invalid.");d=!0}else d=!1;if(!d)throw Error("Trying to interpolate expressions in an unsupported url format.");
c=a[0];for(d=0;d<b.length;d++)c+=encodeURIComponent(b[d])+a[d+1];return wa(c)};function Aa(a){a.importScripts.apply(a,ca(G.apply(1,arguments).map(function(b){if(b instanceof K)b=b.L;else throw Error("Unexpected type when unwrapping TrustedResourceUrl");return b})))};globalThis["gdx.LANG_TO_NAME"]={ar:"Arabic",ca:"Catalan",cs:"Czech",da:"Danish",de:"German",el:"Greek","en-uk":"English (UK)",en:"English (US)",es:"Spanish",fi:"Finnish",fr:"French",hi:"Hindi",hr:"Croatian",id:"Indonesian",it:"Italian",iw:"Hebrew",ja:"Japanese",ko:"Korean",nl:"Dutch",no:"Norwegian",pl:"Polish","pt-br":"Portuguese","pt-pt":"Portuguese",pt:"Portuguese",ro:"Romanian",ru:"Russian",sr:"Serbian",sk:"Slovak",sv:"Swedish",th:"Thai",tl:"Tagalog",tr:"Turkish",uk:"Ukrainian",vi:"Vietnamese",
"zh-cn":"Chinese","zh-tw":"Chinese",zh:"Chinese"};globalThis["gdx.LANG_TO_CORPUS"]={en:"en-US","en-uk":"en"};
globalThis["gdx.LANG_TO_DEFINE"]={ar:"${term} \u0645\u0639\u0646\u0649",de:"was bedeutet ${term}",en:"define ${term}","en-uk":"define ${term}",es:"definir ${term}",fr:"d\u00e9finition ${term}",hi:"\u092e\u0924\u0932\u092c ${term}",it:"definizione ${term}",ja:"${term}\u610f\u5473",ko:"\ub73b ${term}","pt-BR":"defina ${term}",ru:"\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 ${term}",th:"\u0e04\u0e33\u0e19\u0e34\u0e22\u0e32\u0e21 ${term}",tr:"${term} nedir","zh-CN":"${term}\u610f\u601d"};
globalThis["gdx.CORPUS_TO_COUNTRY"]={"en-US":"US",en:"UK"};var Ba=y(["mustache.js"]),O=chrome.runtime.getManifest().manifest_version;O===3&&Aa(self,za(Ba));
var Ca="\" ' ( ) , - . / 0 1 2 : ? a about and are as be but com for from have i in is it like may more my next not of on search that the this to was when with you your".split(" "),P=!1,Q={},R={},Da=0,S=-1,T=-1,Ea=function(a){a=a.replace(/<[^>]*>/g,"");return a=a.replace(/[<>]/g,"")},Fa=function(a){a=Ea(a);return a=a.substring(0,100).toLowerCase()},Ga=function(a){for(var b=Ca.length,c=0;c<b;c++)if(a===Ca[c])return!0;return!1},Ha=function(a,b,c){a.type==="initialize"&&c({instanceId:Da++})},Ia=function(a){a.type===
"openOptionsPage"&&chrome.tabs.create({url:chrome.runtime.getURL("options.html")})},Ja=function(a,b,c){a.type==="options"&&c({options:Q})},Ka=function(a,b,c){if(a.type!=="fetch_raw"&&a.type!=="fetch_html")return!1;globalThis._gaq&&globalThis._gaq.push(["_trackEvent","lookup",a.type]);S!==-1&&T!==a.instanceId&&chrome.tabs.sendMessage(S,{type:"hide",instanceId:T});a.type==="fetch_raw"?(S=b.tab.id,T=a.instanceId):T=S=-1;var d=Fa(a.query),f=function(){var e={request:a,sanitizedQuery:d,dictExtResponse:null,
isGetTabFailure:!1,tabLangDetectFailure:!1,tabLangDetectTimedOut:!1,tabLang:null,callback:c,incognito:!1},g=setTimeout(function(){console.assert(e.dictExtResponse===null);e.tabLangDetectTimedOut=!0;U(d,"",function(h){e.dictExtResponse=h;V(e)})},800);chrome.tabs.query({active:!0,currentWindow:!0},function(h){h=w(h).next().value;if(!h)throw Error("No tab found");e.incognito=h.incognito;chrome.tabs.detectLanguage(h.id,function(l){e.tabLangDetectTimedOut||(clearTimeout(g),l!=="und"?(e.tabLang=l==="he"?
"iw":l,U(d,e.tabLang,function(m){e.dictExtResponse=m;V(e)})):(e.tabLangDetectFailure=!0,U(d,"",function(m){e.dictExtResponse=m;V(e)})))})})};if(P)f();else{var k=function(e){if(P)return f();if(e>10)return c({eventKey:a.eventKey,sanitizedQuery:d});setTimeout(function(){k(e+1)},200)};k(0)}return!0},U=function(a,b,c){La(a,b,c)},La=function(a,b,c){var d=Q.language,f=d;d=="en-uk"&&(f="en");var k=globalThis["gdx.LANG_TO_CORPUS"][d];k||(k=d);a=new URLSearchParams({term:a,language:f,corpus:k,key:"AIzaSyA6EEtrDCfBkHV8uU2lgGY-N383ZgAOo7Y"});
(k=globalThis["gdx.CORPUS_TO_COUNTRY"][k])&&a.set("country",k);b&&a.set("tab_language",b);a.set("strategy",(2).toString());fetch("https://dictionaryextension-pa.googleapis.com/v1/dictionaryExtensionData?"+a.toString(),{headers:{"x-referer":"chrome-extension://"+chrome.runtime.id}}).then(function(e){return e.status!==200?null:e.json()}).then(function(e){e===null?c(null):c(e)})},Ma=function(a,b){var c=null;b&&Q.storeHistory==="true"&&!a.incognito&&chrome.storage.local.get("word-history",function(f){c=
b.srcLang+"<"+Q.language+"<"+a.sanitizedQuery;f["word-history"][c]=b.meaningText;chrome.storage.local.set(f)});b&&!b.prettyQuery&&(b.prettyQuery=a.sanitizedQuery);var d=!1;(Q.popupDblclick==="true"&&Q.popupDblclickKey==="none"||Q.popupSelect==="true"&&Q.popupSelectKey==="none")&&Ga(a.sanitizedQuery)&&(d=!0);a.callback({eventKey:a.request.eventKey,sanitizedQuery:a.sanitizedQuery,meaningObj:b,showOptionsTip:d})},V=function(a){var b=a.dictExtResponse,c="none",d=null;if(b&&b.status===200&&b.translateResponse)c=
"translation",a.preferTran=!0,a.translateResponse=b.translateResponse,(d=Na(b.translateResponse,!0))&&b.oxfordAudio&&(d.audio=W(b.oxfordAudio));else if(b&&b.status===200&&b.dictionaryData){c="definition";a.dictResponse=b.dictionaryData[0];var f=a.dictResponse;if(!f||f.error)d=null;else{d=null;if(b=X(f,"entries[0]"))d={prettyQuery:b.syllabifiedHeadword||b.headword,meaningText:X(b,"senseFamilies[0].senses[0].definition.text"),attribution:"",audio:X(b,"phonetics[0].oxfordAudio"),type:"licensedDef"},
d.meaningText?d.audio&&(d.audio=W(d.audio)):d=null;!d&&(b=X(f,"webDefinitions[0]"))&&(d=b.sourceUrl,d={meaningText:b.definition,attribution:'<a href="'+d+'">'+d+"</a>",type:"webDef"});d?(b=d.meaningText,d.meaningText=b.charAt(0).toUpperCase()+b.slice(1)):d=null}}d||(c="none");globalThis._gaq&&globalThis._gaq.push(["_trackEvent","lookup","type_"+c]);f=encodeURIComponent(a.sanitizedQuery);var k=b="";if(c==="translation")b="https://translate.google.com/translate_t?source=dict-chrome-ex&sl="+d.srcLang+
"&tl="+Q.language+"&q="+f,d.moreUrl=b;else if(c==="definition"){k=Q.language;var e=(e=globalThis["gdx.LANG_TO_DEFINE"][k])?e.replace("${term}",f):"";var g=globalThis["gdx.LANG_TO_CORPUS"][Q.language];g||(g=Q.language);f="https://www.google.com/search?dictcorpus="+g+"&hl="+k+"&forcedict="+f+"&q="+e;k==="en-uk"&&(f+="&gl=gb");k=f;d.moreUrl=k}a.request.type==="fetch_html"?(e="",d&&(e=d.audio),f=a.dictResponse,c=a.translateResponse,d=e,a.preferTran?(f=Na(c,!1))?(d&&(f.audio=d),c.tranResSummary=f,c.moreUrl=
b,c.dict=c.bilingualDictionary,c.hasDict=!!c.dict&&c.dict.length,c=R.browser_action_tran(c)):c="":c=Oa(f,k),a.callback({eventKey:a.request.eventKey,sanitizedQuery:a.sanitizedQuery,html:c})):(c==="definition"&&(d.srcLang=Q.language),Ma(a,d))},Na=function(a,b){if(!a||!a.translateText||a.translateText.length===0)return null;var c=a.sourceText.toLowerCase(),d=a.translateText.toLowerCase();if(b){b=a.bilingualDictionary;var f=d;if(b)for(var k=b.length,e=0;e<k;e++)for(var g=b[e],h=0,l=g.terms.length,m=0;m<
l&&h<2;m++){var r=g.terms[m].toLowerCase();r.length>0&&r!==c&&r!==d&&(f+=", "+r,h++)}c=Ea(f)}else c=d;a=a.detectedSourceLanguage;(d=globalThis["gdx.LANG_TO_NAME"][a.toLowerCase()])||(d=a);return{type:"translation",meaningText:c,attribution:"Translated from "+d,srcLang:a}},X=function(a,b){b=b.split(".");for(var c=0;c<b.length;c++){var d=b[c];console.assert(d);if(d.charAt(d.length-1)==="]"){d=d.split("[");console.assert(d.length===2);var f=parseInt(d[1].slice(0,-1),10);a=a[d[0]];if(!a)return null;a=
a[f]}else a=a[d];if(!a)return null}return a},W=function(a){return a.substr(0,2)==="//"?"https:"+a:a},Oa=function(a,b){if(!a||a.error)return"";a.moreUrl=b;a.makeAudioUrl=function(){var d=this.oxfordAudio;return d?W(d):""};var c={};a.showOnlyOnce=function(){return function(d,f){d=f(d);if(c[d])return"";c[d]=!0;return d}};return R.browser_action_dict(a)},Pa=function(a){var b={};b.language=a.language||"en";var c=function(f,k){var e=a[f];b[f]=k;e==="true"||e==="false"?b[f]=e:typeof e==="boolean"&&(b[f]=
String(e))},d=function(f,k){b[f]=a[f]||k};c("popupDblclick","true");c("popupSelect","false");c("enableHttps","true");d("popupDblclickKey","none");d("popupSelectKey","ctrl");c("storeHistory","false");c("allowCrossExtensionHistory","false");a.language==="pt"&&(b.language="pt-BR");return b},Qa=function(a,b,c){if(Q.allowCrossExtensionHistory==="false"||Q.storeHistory==="false"||!a||!a.getHistory)return!1;chrome.storage.local.get("word-history",function(d){c(d["word-history"])});return!0},Ra=function(a,
b){fetch(a).then(function(c){return c.text()}).then(b)},Sa=function(a){if(Object.keys(R).length!=2){var b=function(){Object.keys(R).length<2||a&&a()},c=function(d){Mustache.parse(d);return function(f){return Mustache.render(d,f)}};Ra("templates/browser_action_dict.html",function(d){R.browser_action_dict=c(d);b()});Ra("templates/browser_action_tran.html",function(d){R.browser_action_tran=c(d);b()})}},Y=function(a){return new Promise(function(b){chrome.storage.local.get(a,b)})},Ta=function(a){return new Promise(function(b){chrome.storage.local.set(a,
b)})},Ua=function(){var a,b;return F(function(c){if(c.h==1)return B(c,Y("storage-migrated"),2);a=c.B;b=a["storage-migrated"];return c.return(b!==!0)})},Va=function(a){"storage-migrated"in a&&a["storage-migrated"].newValue===!0&&Z();"options"in a&&(Q=a.options.newValue)},Wa=function(){var a,b,c,d,f,k,e,g;return F(function(h){if(h.h==1)return a=w,B(h,Promise.all([Y("options"),Y("word-history")]),2);if(h.h!=3)return b=a(h.B),c=b.next().value,d=c.options,f=b.next().value,k=f["word-history"],Q=Pa(d||{}),
e={},B(h,Ta((e.options=Q,e)),3);if(k)h.h=0;else return g={},B(h,Ta((g["word-history"]={},g)),0)})},Z=function(){var a;return F(function(b){switch(b.h){case 1:chrome.runtime.onMessage.addListener(Ha);chrome.runtime.onMessage.addListener(Ia);chrome.runtime.onMessage.addListener(Ja);chrome.runtime.onMessage.addListener(Ka);chrome.runtime.onMessageExternal.addListener(Qa);chrome.storage.local.onChanged.addListener(Va);if(!(a=O===3)){b.h=2;break}return B(b,Ua(),3);case 3:a=b.B;case 2:return a?(chrome.tabs.create({url:chrome.runtime.getURL("options.html?migrate"),
active:!1}),b.return()):B(b,Promise.all([Wa(),new Promise(function(c){return Sa(c)})]),4);case 4:P=!0,b.h=0}})};O<=2&&(window.loadTemplates=Sa,window.initBackgroundPage=Z);globalThis.fa||Z();})();
